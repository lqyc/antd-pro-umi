{"version":3,"sources":["../../src/core/BaseModel.ts"],"names":["BaseModel","TYPES","IGlobalConfigService","IShaderModuleService","layer","triangulation","rendererService","iconService","fontService","styleAttributeService","mapService","cameraService","layerService","getContainer","get","IRendererService","IStyleAttributeService","IMapService","IIconService","IFontService","ICameraService","ILayerService","registerBuiltinAttributes","startModelAnimate","getLayerConfig","blend","BlendTypes","BlendType","Error","option","enable","duration","interval","trailLength","animateOption","setAnimateStartTime"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;AAwBA;;;;IACqBA,S,WAMlB,wBAAWC,cAAMC,oBAAjB,C,UASA,wBAAWD,cAAME,oBAAjB,C;AAWD,qBAAYC,KAAZ,EAA2B;AAAA;AAAA,SAxBpBC,aAwBoB;AAAA,SAtBjBD,KAsBiB;AAAA;AAAA;AAAA,SARjBE,eAQiB;AAAA,SAPjBC,WAOiB;AAAA,SANjBC,WAMiB;AAAA,SALjBC,qBAKiB;AAAA,SAJjBC,UAIiB;AAAA,SAHjBC,aAGiB;AAAA,SAFjBC,YAEiB;AACzB,SAAKR,KAAL,GAAaA,KAAb;AACA,SAAKE,eAAL,GAAuBF,KAAK,CACzBS,YADoB,GAEpBC,GAFoB,CAEEb,cAAMc,gBAFR,CAAvB;AAGA,SAAKN,qBAAL,GAA6BL,KAAK,CAC/BS,YAD0B,GAE1BC,GAF0B,CAEEb,cAAMe,sBAFR,CAA7B;AAGA,SAAKN,UAAL,GAAkBN,KAAK,CAACS,YAAN,GAAqBC,GAArB,CAAsCb,cAAMgB,WAA5C,CAAlB;AACA,SAAKV,WAAL,GAAmBH,KAAK,CACrBS,YADgB,GAEhBC,GAFgB,CAEEb,cAAMiB,YAFR,CAAnB;AAGA,SAAKV,WAAL,GAAmBJ,KAAK,CACrBS,YADgB,GAEhBC,GAFgB,CAEEb,cAAMkB,YAFR,CAAnB;AAGA,SAAKR,aAAL,GAAqBP,KAAK,CACvBS,YADkB,GAElBC,GAFkB,CAEEb,cAAMmB,cAFR,CAArB;AAGA,SAAKR,YAAL,GAAoBR,KAAK,CACtBS,YADiB,GAEjBC,GAFiB,CAEEb,cAAMoB,aAFR,CAApB;AAKA,SAAKC,yBAAL;AAEA,SAAKC,iBAAL;AACD;;;;WACD,oBAAiC;AAAA,kCACF,KAAKnB,KAAL,CAAWoB,cAAX,EADE;AAAA,yDACvBC,KADuB;AAAA,UACvBA,KADuB,uCACf,QADe;;AAE/B,aAAOC,kBAAWC,kBAAUF,KAAV,CAAX,CAAP;AACD;;;WACD,2BAAkC;AAChC,aAAO,EAAP;AACD;;;WACD,wBAAqC;AACnC,YAAM,IAAIG,KAAJ,CAAU,yBAAV,CAAN;AACD;;;WAED,8BAA2C;AACzC,aAAO,EAAP;AACD;;;WAED,sBAA6B;AAC3B,aAAO,KAAP;AACD;;;WACD,uBAA+B;AAC7B,YAAM,IAAIA,KAAJ,CAAU,yBAAV,CAAN;AACD;;;WACD,sBAA8B;AAC5B,YAAM,IAAIA,KAAJ,CAAU,yBAAV,CAAN;AACD;;;WACD,uBAAqB;AACnB;AACD;;;WACD,wBAKE;AACA,YAAM,IAAIA,KAAJ,CAAU,yBAAV,CAAN;AACD;;;WACD,kBAAgB;AACd,YAAM,IAAIA,KAAJ,CAAU,yBAAV,CAAN;AACD;;;WACD,qCAAsC;AACpC,YAAM,IAAIA,KAAJ,CAAU,yBAAV,CAAN;AACD;;;WACD,6BAA8BC,MAA9B,EAAgE;AAC9D,aAAO,CACLA,MAAM,CAACC,MAAP,GAAgB,CAAhB,GAAoB,GADf,EAELD,MAAM,CAACE,QAAP,IAAmB,GAFd,EAGLF,MAAM,CAACG,QAAP,IAAmB,GAHd,EAILH,MAAM,CAACI,WAAP,IAAsB,GAJjB,CAAP;AAMD;;;WACD,6BAA8B;AAAA,iBACF,KAAK7B,KAAL,CAAWoB,cAAX,EADE;AAAA,UACpBU,aADoB,QACpBA,aADoB;;AAE5B,UAAIA,aAAa,CAACJ,MAAlB,EAA0B;AACxB,aAAK1B,KAAL,CAAW+B,mBAAX;AACD;AACF","sourcesContent":["import {\n  BlendType,\n  IAnimateOption,\n  IAttribute,\n  IBlendOptions,\n  ICameraService,\n  IElements,\n  IFontService,\n  IGlobalConfigService,\n  IIconService,\n  ILayer,\n  ILayerConfig,\n  ILayerModel,\n  ILayerService,\n  IMapService,\n  IModel,\n  IModelUniform,\n  IRendererService,\n  IShaderModuleService,\n  IStyleAttributeService,\n  lazyInject,\n  Triangulation,\n  TYPES,\n} from '@antv/l7-core';\nimport { BlendTypes } from '../utils/blend';\nexport default class BaseModel<ChildLayerStyleOptions = {}>\n  implements ILayerModel {\n  public triangulation: Triangulation;\n\n  protected layer: ILayer;\n\n  @lazyInject(TYPES.IGlobalConfigService)\n  protected readonly configService: IGlobalConfigService;\n\n  // @lazyInject(TYPES.IIconService)\n  // protected readonly iconService: IIconService;\n\n  // @lazyInject(TYPES.IFontService)\n  // protected readonly fontService: IFontService;\n\n  @lazyInject(TYPES.IShaderModuleService)\n  protected readonly shaderModuleService: IShaderModuleService;\n\n  protected rendererService: IRendererService;\n  protected iconService: IIconService;\n  protected fontService: IFontService;\n  protected styleAttributeService: IStyleAttributeService;\n  protected mapService: IMapService;\n  protected cameraService: ICameraService;\n  protected layerService: ILayerService;\n\n  constructor(layer: ILayer) {\n    this.layer = layer;\n    this.rendererService = layer\n      .getContainer()\n      .get<IRendererService>(TYPES.IRendererService);\n    this.styleAttributeService = layer\n      .getContainer()\n      .get<IStyleAttributeService>(TYPES.IStyleAttributeService);\n    this.mapService = layer.getContainer().get<IMapService>(TYPES.IMapService);\n    this.iconService = layer\n      .getContainer()\n      .get<IIconService>(TYPES.IIconService);\n    this.fontService = layer\n      .getContainer()\n      .get<IFontService>(TYPES.IFontService);\n    this.cameraService = layer\n      .getContainer()\n      .get<ICameraService>(TYPES.ICameraService);\n    this.layerService = layer\n      .getContainer()\n      .get<ILayerService>(TYPES.ILayerService);\n\n    // 注册 Attribute\n    this.registerBuiltinAttributes();\n    // 开启动画\n    this.startModelAnimate();\n  }\n  public getBlend(): IBlendOptions {\n    const { blend = 'normal' } = this.layer.getLayerConfig();\n    return BlendTypes[BlendType[blend]] as IBlendOptions;\n  }\n  public getDefaultStyle(): unknown {\n    return {};\n  }\n  public getUninforms(): IModelUniform {\n    throw new Error('Method not implemented.');\n  }\n\n  public getAnimateUniforms(): IModelUniform {\n    return {};\n  }\n\n  public needUpdate(): boolean {\n    return false;\n  }\n  public buildModels(): IModel[] {\n    throw new Error('Method not implemented.');\n  }\n  public initModels(): IModel[] {\n    throw new Error('Method not implemented.');\n  }\n  public clearModels() {\n    return;\n  }\n  public getAttribute(): {\n    attributes: {\n      [attributeName: string]: IAttribute;\n    };\n    elements: IElements;\n  } {\n    throw new Error('Method not implemented.');\n  }\n  public render() {\n    throw new Error('Method not implemented.');\n  }\n  protected registerBuiltinAttributes() {\n    throw new Error('Method not implemented.');\n  }\n  protected animateOption2Array(option: IAnimateOption): number[] {\n    return [\n      option.enable ? 0 : 1.0,\n      option.duration || 4.0,\n      option.interval || 0.2,\n      option.trailLength || 0.1,\n    ];\n  }\n  protected startModelAnimate() {\n    const { animateOption } = this.layer.getLayerConfig() as ILayerConfig;\n    if (animateOption.enable) {\n      this.layer.setAnimateStartTime();\n    }\n  }\n}\n"],"file":"BaseModel.js"}