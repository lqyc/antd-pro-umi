{"version":3,"sources":["../../src/plugins/LayerModelPlugin.ts"],"names":["injectable","LayerModelPlugin","layer","hooks","init","tap","prepareBuildModel","buildModels","styleNeedUpdate","beforeRenderData","clearModels","layerModelNeedUpdate"],"mappings":";;;;;AACA,SAASA,UAAT,QAA2B,WAA3B;IAKqBC,gB,WADpBD,UAAU,E;;;;;;;WAET,eAAaE,KAAb,EAA4B;AAC1BA,MAAAA,KAAK,CAACC,KAAN,CAAYC,IAAZ,CAAiBC,GAAjB,CAAqB,kBAArB,EAAyC,YAAM;AAE7CH,QAAAA,KAAK,CAACI,iBAAN;AAEAJ,QAAAA,KAAK,CAACK,WAAN;AACAL,QAAAA,KAAK,CAACM,eAAN,GAAwB,KAAxB;AACD,OAND;AAQAN,MAAAA,KAAK,CAACC,KAAN,CAAYM,gBAAZ,CAA6BJ,GAA7B,CAAiC,kBAAjC,EAAqD,YAAM;AAEzDH,QAAAA,KAAK,CAACI,iBAAN;AAEAJ,QAAAA,KAAK,CAACQ,WAAN;AAEAR,QAAAA,KAAK,CAACK,WAAN;AACAL,QAAAA,KAAK,CAACS,oBAAN,GAA6B,KAA7B;AACA,eAAO,KAAP;AACD,OATD;AAUD;;;;;SApBkBV,gB","sourcesContent":["import { ILayer, ILayerPlugin, IMapService, TYPES } from '@antv/l7-core';\nimport { injectable } from 'inversify';\n/**\n * Layer Model 初始化，更新，销毁\n */\n@injectable()\nexport default class LayerModelPlugin implements ILayerPlugin {\n  public apply(layer: ILayer) {\n    layer.hooks.init.tap('LayerModelPlugin', () => {\n      // 更新Model 配置项\n      layer.prepareBuildModel();\n      // 初始化 Model\n      layer.buildModels();\n      layer.styleNeedUpdate = false;\n    });\n\n    layer.hooks.beforeRenderData.tap('DataSourcePlugin', () => {\n      // 更新Model 配置项\n      layer.prepareBuildModel();\n\n      layer.clearModels();\n      // 初始化 Model\n      layer.buildModels();\n      layer.layerModelNeedUpdate = false;\n      return false;\n    });\n  }\n}\n"],"file":"LayerModelPlugin.js"}