!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@antv/g6")):"function"==typeof define&&define.amd?define(["@antv/g6"],t):"object"==typeof exports?exports["plugin.edge.polyline"]=t(require("@antv/g6")):n["plugin.edge.polyline"]=t(n.G6)}(window,function(n){return function(n){var t={};function e(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var i in n)e.d(r,i,function(t){return n[t]}.bind(null,i));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=592)}({3:function(t,e){t.exports=n},592:function(n,t,e){var r=e(3),i=r.Util;function o(n,t){var e=Math.min(n.minX,t.minX),r=Math.min(n.minY,t.minY),i=Math.max(n.maxX,t.maxX),o=Math.max(n.maxY,t.maxY);return{centerX:(e+i)/2,centerY:(r+o)/2,minX:e,minY:r,maxX:i,maxY:o,height:o-r,width:i-e}}function u(n,t){return 2*Math.abs(n.centerX-t.centerX)<n.width+t.width&&2*Math.abs(n.centerY-t.centerY)<n.height+t.height}function a(n){var t=n.x,e=n.y;return{centerX:t,centerY:e,minX:t,minY:e,maxX:t,maxY:e,height:0,width:0}}function f(n,t){return 0===n.width&&0===n.height?n:{centerX:n.centerX,centerY:n.centerY,minX:n.minX-t,minY:n.minY-t,maxX:n.maxX+t,maxY:n.maxY+t,height:n.height+2*t,width:n.width+2*t}}function c(n,t){return function(n,t){var e=Math.abs(n.x-t.centerX),r=Math.abs(n.y-t.centerY);return e/t.width>r/t.height}(t,n)?{x:t.x>n.centerX?n.maxX:n.minX,y:t.y}:{x:t.x,y:t.y>n.centerY?n.maxY:n.minY}}function x(n){var t=n.minX,e=n.minY,r=n.maxX,i=n.maxY;return[{x:t,y:e},{x:r,y:e},{x:r,y:i},{x:t,y:i}]}function y(n,t){var e=n.x,r=n.y;return e<t.minX||e>t.maxX||r<t.minY||r>t.maxY}function h(n,t,e,r){var i=t.x-n.x,o=t.y-n.y,u=r.x-e.x,a=r.y-e.y,f=(-o*(n.x-e.x)+i*(n.y-e.y))/(-u*o+i*a),c=(u*(n.y-e.y)-a*(n.x-e.x))/(-u*o+i*a);return f>=0&&f<=1&&c>=0&&c<=1}function m(n,t,e){if(e.width===e.height===0)return!1;var r=x(e),i=r[0],o=r[1],u=r[2],a=r[3];return h(n,t,i,o)||h(n,t,i,a)||h(n,t,o,u)||h(n,t,u,a)}function d(n){return n=function(n){for(var t=[n[0]],e=1;e<n.length;e++){var r=n[e],i=n[e+1],o=n[e-1];i&&o&&(i.x===r.x&&o.x===r.x||i.y===r.y&&o.y===r.y)||t.push(r)}return t}(n=p(n))}function s(n,t){return[n,{x:n.x,y:t.y},t]}function p(n){var t=[],e={};return n.forEach(function(n){var t=n.id=n.x+"-"+n.y;e[t]=n}),i.each(e,function(n){t.push(n)}),t}function l(n,t){return Math.abs(n.x-t.x)+Math.abs(n.y-t.y)}function v(n,t,e,r,i){return l(n,t)+l(n,e)+function(n,t){var e=0;return t.forEach(function(t){t&&(n.x===t.x&&(e+=-2),n.y===t.y&&(e+=-2))}),e}(n,[t,e,r,i])}function g(n,t,e,r,i,o,u){var a=[],f=[t],c={},x={},y={};x[t.id]=0,y[t.id]=v(t,e,t);var h={};n.forEach(function(n){h[n.id]=n});for(var d=function(){var d=void 0,s=1/0;if(f.forEach(function(n){y[n.id]<s&&(s=y[n.id],d=n)}),d===e){var g=[];return function n(t,e,r,i,o){void 0===o&&(o=0),t.unshift(e[i]),r[i]&&r[i]!==i&&o<=100&&n(t,e,r,r[i],o+1)}(g,h,c,e.id),{v:g}}!function(n,t){var e=n.indexOf(t);e>-1&&n.splice(e,1)}(f,d),a.push(d),function(n,t,e,r){var i=[];return n.forEach(function(n){n!==t&&(n.x!==t.x&&n.y!==t.y||m(n,t,e)||m(n,t,r)||i.push(n))}),p(i)}(n,d,r,i).forEach(function(n){if(-1===a.indexOf(n)){-1===f.indexOf(n)&&f.push(n);var r=y[d.id]+l(d,n);x[n.id]&&r>=x[n.id]||(c[n.id]=d.id,x[n.id]=r,y[n.id]=x[n.id]+v(n,e,t,o,u))}})};f.length;){var s=d();if("object"==typeof s)return s.v}return console.error("cannot find path: ",n,t,e),[t,e]}function b(n,t,e,r,i){var h=e&&e.bbox?e.bbox:a(n),m=r&&r.bbox?r.bbox:a(t);if(u(h,m))return d(s(n,t));var l=f(h,i),v=f(m,i);if(u(l,v))return d(s(n,t));var b=c(l,n),X=c(v,t),Y=function(n){void 0===n&&(n=[]);var t=[],e=[];n.forEach(function(n){t.push(n.x),e.push(n.y)});var r=Math.min.apply(Math,t),i=Math.max.apply(Math,t),o=Math.min.apply(Math,e),u=Math.max.apply(Math,e);return{centerX:(r+i)/2,centerY:(o+u)/2,maxX:i,maxY:u,minX:r,minY:o,height:u-o,width:i-r}}([b,X]),M=(o(l,v),o(l,Y)),P=o(v,Y),w=[];w=(w=w.concat(x(M))).concat(x(P));var E={x:(n.x+t.x)/2,y:(n.y+t.y)/2};[Y,M,P].forEach(function(n){w=w.concat(function(n,t){return function(n,t){return t<n.minX||t>n.maxX?[]:[{x:t,y:n.minY},{x:t,y:n.maxY}]}(n,t.x).concat(function(n,t){return t<n.minY||t>n.maxY?[]:[{x:n.minX,y:t},{x:n.maxX,y:t}]}(n,t.y))}(n,E).filter(function(n){return y(n,l)&&y(n,v)}))}),[{x:b.x,y:X.y},{x:X.x,y:b.y}].forEach(function(n){y(n,l)&&y(n,v)&&w.push(n)}),w.unshift(b),w.push(X);var j=g(w=p(w),b,X,h,m,n,t);return j.unshift(n),j.push(t),d(j)}function X(n,t){var e=[],r=n[0];return e.push(["M",r.x,r.y]),n.forEach(function(r,i){var o=n[i+1],u=n[i+2];if(o&&u)if(function(n,t,e){return!(n.x===t.x===e.x||n.y===t.y===e.y)}(r,o,u)){var a=function(n,t,e,r){var i=l(n,t),o=l(e,t);return i<r&&(r=i),o<r&&(r=o),[{x:t.x-r/i*(t.x-n.x),y:t.y-r/i*(t.y-n.y)},{x:t.x-r/o*(t.x-e.x),y:t.y-r/o*(t.y-e.y)}]}(r,o,u,t),f=a[0],c=a[1];e.push(["L",f.x,f.y]),e.push(["Q",o.x,o.y,c.x,c.y]),e.push(["L",c.x,c.y])}else e.push(["L",o.x,o.y]);else o&&e.push(["L",o.x,o.y])}),e}r.registerEdge("polyline",{offset:10,getPath:function(n){var t=n.getPoints(),e=n.getSource(),r=n.getTarget();return this.getPathByPoints(t,e,r)},getPathByPoints:function(n,t,e){var r=b(n[0],n[n.length-1],t,e,this.offset);return i.pointsToPolygon(r)}}),r.registerEdge("polyline-round",{borderRadius:9,getPathByPoints:function(n,t,e){return X(d(b(n[0],n[n.length-1],t,e,this.offset)),this.borderRadius)}},"polyline"),n.exports=!0}})});
//# sourceMappingURL=plugin.edge.polyline.js.map