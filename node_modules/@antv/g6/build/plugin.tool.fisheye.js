!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@antv/g6")):"function"==typeof define&&define.amd?define(["@antv/g6"],t):"object"==typeof exports?exports["plugin.tool.fisheye"]=t(require("@antv/g6")):e["plugin.tool.fisheye"]=t(e.G6)}(window,function(e){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=121)}({121:function(e,t,o){function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var r=o(3),i=r.Util,u=o(239),f=function(){function e(e){i.mix(this,e),this.options=e}return e.prototype.init=function(){var e=this,t=this.graph;this.oriPos=new Map,this.preMoveNodes=[],t.on("beforeinit",function(){var o=new u(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(t){n(e,t,o[t])})}return e}({graph:t},e.options));t.on("mousemove",i.throttle(function(n){if(!t.destroyed){var r=t.getNodes().length;if(e.oriPos.size===r){for(var i=0;i<e.preMoveNodes.length;i+=1){var u=e.preMoveNodes[i].getModel();u.x=e.oriPos.get(e.preMoveNodes[i].id).x,u.y=e.oriPos.get(e.preMoveNodes[i].id).y}t.preventAnimate(function(){t.updateNodePosition(e.preMoveNodes)}),e.preMoveNodes=o.zoom(n.x,n.y)}}},30))});var o=i.debounce(function(o){if(!t.destroyed){var n=t.getNodes(),r=n.length;if(e.preMoveNodes=[],void 0===o||void 0===o.item)for(var i=0;i<r;i++){if(void 0===n[i].getModel().x)return;e.oriPos.set(n[i].id,{x:n[i].getModel().x,y:n[i].getModel().y})}else{if("node"!==o.item.type||void 0===o.updateModel.x&&void 0===o.updateModel.y)return;e.oriPos.set(o.originModel.id,{x:o.updateModel.x,y:o.updateModel.y})}}},30);t.on("afterchange",o),t.on("afterlayout",o)},e}();r.Plugins["tool.fisheye"]=f,e.exports=f},239:function(e,t,o){var n=o(3).Util,r=function(){function e(e){n.mix(this,{radius:200,center:[0,0],d:1},e)}return e.prototype.zoom=function(e,t){for(var o=this.graph,n=this.radius,r=this.d,f=[e,t],a=o.getNodes(),d=a.length,s=[],p=0;p<d;p+=1){var c=a[p].getModel();if(Math.hypot(c.x-f[0],c.y-f[1])<n){var l=[c.x-f[0],c.y-f[1]],y=i(l[0],l[1]),v=y.p,h=u(n*((r+1)*(v/n)/(r*(v/n)+1)),y.theta),g=h.x,M=h.y,b=a[p].getModel();b.x=g+f[0],b.y=M+f[1],s.push(a[p])}}return o.preventAnimate(function(){o.updateNodePosition(s)}),s},e}();function i(e,t){var o,n=Math.hypot(e,t);return t>=0?o=0===e?Math.PI/2:Math.acos(e/n):t<0&&(o=0===e?3*Math.PI/2:2*Math.PI-Math.acos(e/n)),{p:n,theta:o}}function u(e,t){return{x:e*Math.cos(t),y:e*Math.sin(t)}}e.exports=r},3:function(t,o){t.exports=e}})});
//# sourceMappingURL=plugin.tool.fisheye.js.map