{"version":3,"sources":["../../../src/handler/tap/tap_zoom.ts"],"names":["TapZoomHandler","enabled","active","zoomIn","zoomOut","TapRecognizer","numTouches","numTaps","reset","e","points","mapTouches","touchstart","touchmove","zoomInPoint","touchend","zoomOutPoint","preventDefault","setTimeout","cameraAnimation","map","easeTo","duration","zoom","getZoom","around","unproject","originalEvent"],"mappings":"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","sourcesContent":["// @ts-ignore\nimport Point from '../../geo/point';\nimport { Map } from '../../map';\nimport TapRecognizer from './tap_recognizer';\n\nexport default class TapZoomHandler {\n  public enabled: boolean;\n  public active: boolean;\n  public zoomIn: TapRecognizer;\n  public zoomOut: TapRecognizer;\n\n  constructor() {\n    this.zoomIn = new TapRecognizer({\n      numTouches: 1,\n      numTaps: 2,\n    });\n\n    this.zoomOut = new TapRecognizer({\n      numTouches: 2,\n      numTaps: 1,\n    });\n\n    this.reset();\n  }\n\n  public reset() {\n    this.active = false;\n    this.zoomIn.reset();\n    this.zoomOut.reset();\n  }\n\n  public touchstart(e: TouchEvent, points: Point[], mapTouches: Touch[]) {\n    this.zoomIn.touchstart(e, points, mapTouches);\n    this.zoomOut.touchstart(e, points, mapTouches);\n  }\n\n  public touchmove(e: TouchEvent, points: Point[], mapTouches: Touch[]) {\n    this.zoomIn.touchmove(e, points, mapTouches);\n    this.zoomOut.touchmove(e, points, mapTouches);\n  }\n\n  public touchend(e: TouchEvent, points: Point[], mapTouches: Touch[]) {\n    const zoomInPoint = this.zoomIn.touchend(e, points, mapTouches);\n    const zoomOutPoint = this.zoomOut.touchend(e, points, mapTouches);\n\n    if (zoomInPoint) {\n      this.active = true;\n      e.preventDefault();\n      setTimeout(() => this.reset(), 0);\n      return {\n        cameraAnimation: (map: Map) =>\n          map.easeTo(\n            {\n              duration: 300,\n              zoom: map.getZoom() + 1,\n              around: map.unproject(zoomInPoint),\n            },\n            { originalEvent: e },\n          ),\n      };\n    } else if (zoomOutPoint) {\n      this.active = true;\n      e.preventDefault();\n      setTimeout(() => this.reset(), 0);\n      return {\n        cameraAnimation: (map: Map) =>\n          map.easeTo(\n            {\n              duration: 300,\n              zoom: map.getZoom() - 1,\n              around: map.unproject(zoomOutPoint),\n            },\n            { originalEvent: e },\n          ),\n      };\n    }\n  }\n\n  public touchcancel() {\n    this.reset();\n  }\n\n  public enable() {\n    this.enabled = true;\n  }\n\n  public disable() {\n    this.enabled = false;\n    this.reset();\n  }\n\n  public isEnabled() {\n    return this.enabled;\n  }\n\n  public isActive() {\n    return this.active;\n  }\n}\n"],"file":"tap_zoom.js"}