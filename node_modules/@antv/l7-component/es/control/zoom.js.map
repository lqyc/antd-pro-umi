{"version":3,"sources":["../../src/control/zoom.ts"],"names":["bindAll","DOM","Control","PositionType","Zoom","cfg","disabled","zoomInButton","zoomOutButton","position","TOPLEFT","zoomInText","zoomInTitle","zoomOutText","zoomOutTitle","name","zoomName","container","create","createButton","controlOption","zoomIn","zoomOut","mapsService","on","updateDisabled","off","getZoom","getMaxZoom","getMinZoom","html","tile","className","fn","link","innerHTML","title","href","addEventListener","removeClass","addClass"],"mappings":"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","sourcesContent":["import { IControlOption } from '@antv/l7-core';\nimport { bindAll, DOM } from '@antv/l7-utils';\nimport Control, { PositionType } from './BaseControl';\nexport interface IZoomControlOption extends IControlOption {\n  zoomInText: string;\n  zoomInTitle: string;\n  zoomOutText: string;\n  zoomOutTitle: string;\n}\nexport default class Zoom extends Control {\n  private disabled: boolean;\n  private zoomInButton: HTMLElement;\n  private zoomOutButton: HTMLElement;\n\n  constructor(cfg?: Partial<IZoomControlOption>) {\n    super(cfg);\n    bindAll(['updateDisabled', 'zoomIn', 'zoomOut'], this);\n  }\n  public getDefault() {\n    return {\n      position: PositionType.TOPLEFT,\n      zoomInText: '+',\n      zoomInTitle: 'Zoom in',\n      zoomOutText: '&#x2212;',\n      zoomOutTitle: 'Zoom out',\n      name: 'zoom',\n    };\n  }\n\n  public onAdd(): HTMLElement {\n    const zoomName = 'l7-control-zoom';\n    const container = DOM.create('div', zoomName + ' l7-bar');\n\n    this.zoomInButton = this.createButton(\n      this.controlOption.zoomInText,\n      this.controlOption.zoomInTitle,\n      zoomName + '-in',\n      container,\n      this.zoomIn,\n    );\n    this.zoomOutButton = this.createButton(\n      this.controlOption.zoomOutText,\n      this.controlOption.zoomOutTitle,\n      zoomName + '-out',\n      container,\n      this.zoomOut,\n    );\n    this.mapsService.on('zoomend', this.updateDisabled);\n    this.mapsService.on('zoomchange', this.updateDisabled);\n    this.updateDisabled();\n    return container;\n  }\n\n  public onRemove() {\n    this.mapsService.off('zoomend', this.updateDisabled);\n    this.mapsService.off('zoomchange', this.updateDisabled);\n  }\n\n  public disable() {\n    this.disabled = true;\n    this.updateDisabled();\n    return this;\n  }\n\n  public enable() {\n    this.disabled = false;\n    this.updateDisabled();\n    return this;\n  }\n\n  private zoomIn() {\n    if (\n      !this.disabled &&\n      this.mapsService.getZoom() < this.mapsService.getMaxZoom()\n    ) {\n      this.mapsService.zoomIn();\n    }\n  }\n  private zoomOut() {\n    if (\n      !this.disabled &&\n      this.mapsService.getZoom() > this.mapsService.getMinZoom()\n    ) {\n      this.mapsService.zoomOut();\n    }\n  }\n  private createButton(\n    html: string,\n    tile: string,\n    className: string,\n    container: HTMLElement,\n    fn: (...arg: any[]) => any,\n  ) {\n    const link = DOM.create('a', className, container) as HTMLLinkElement;\n    link.innerHTML = html;\n    link.title = tile;\n    link.href = 'javascript:void(0)';\n    link.addEventListener('click', fn);\n    return link;\n  }\n  private updateDisabled() {\n    const mapsService = this.mapsService;\n    const className = 'l7-disabled';\n    DOM.removeClass(this.zoomInButton, className);\n    DOM.removeClass(this.zoomOutButton, className);\n    if (this.disabled || mapsService.getZoom() <= mapsService.getMinZoom()) {\n      DOM.addClass(this.zoomOutButton, className);\n    }\n    if (this.disabled || mapsService.getZoom() >= mapsService.getMaxZoom()) {\n      DOM.addClass(this.zoomInButton, className);\n    }\n  }\n}\n"],"file":"zoom.js"}