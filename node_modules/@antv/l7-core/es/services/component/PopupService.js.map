{"version":3,"sources":["../../../src/services/component/PopupService.ts"],"names":["injectable","TYPES","PopupService","scene","popup","mapsService","unAddPopup","remove","map","getMarkerContainer","addTo","addPopup","get","IMapService"],"mappings":";;;;;AAAA,SAAoBA,UAApB,QAAsC,WAAtC;AACA,SAASC,KAAT,QAAsB,aAAtB;IAKqBC,Y,WADpBF,UAAU,E;;;;SAEDG,K;SACAC,K;SACAC,W;SACAC,U;;;;;WAER,qBAAmBF,KAAnB,EAAwC;AACtCA,MAAAA,KAAK,CAACG,MAAN;AACD;;;WAED,mBAAuB;AACrB,WAAKH,KAAL,CAAWG,MAAX;AACD;;;WAED,kBAAgBH,KAAhB,EAA+B;AAC7B,UAAI,KAAKA,KAAT,EAAgB;AACd,aAAKA,KAAL,CAAWG,MAAX;AACD;;AACD,UAAI,KAAKF,WAAL,CAAiBG,GAAjB,IAAwB,KAAKH,WAAL,CAAiBI,kBAAjB,EAA5B,EAAmE;AACjEL,QAAAA,KAAK,CAACM,KAAN,CAAY,KAAKP,KAAjB;AACA,aAAKC,KAAL,GAAaA,KAAb;AACD,OAHD,MAGO;AACL,aAAKE,UAAL,GAAkBF,KAAlB;AACD;AACF;;;WACD,qBAAmB;AACjB,UAAI,KAAKE,UAAT,EAAqB;AACnB,aAAKK,QAAL,CAAc,KAAKL,UAAnB;AACA,aAAKA,UAAL,GAAkB,IAAlB;AACD;AACF;;;WAED,cAAYH,KAAZ,EAA8B;AAC5B,WAAKA,KAAL,GAAaA,KAAb;AACA,WAAKE,WAAL,GAAmBF,KAAK,CAACS,GAAN,CAAuBX,KAAK,CAACY,WAA7B,CAAnB;AACD;;;;;SAnCkBX,Y","sourcesContent":["import { Container, injectable } from 'inversify';\nimport { TYPES } from '../../types';\nimport { IMapService } from '../map/IMapService';\nimport { IPopup, IPopupService } from './IPopupService';\n\n@injectable()\nexport default class PopupService implements IPopupService {\n  private scene: Container;\n  private popup: IPopup;\n  private mapsService: IMapService;\n  private unAddPopup: IPopup | null;\n\n  public removePopup(popup: IPopup): void {\n    popup.remove();\n  }\n\n  public destroy(): void {\n    this.popup.remove();\n  }\n\n  public addPopup(popup: IPopup) {\n    if (this.popup) {\n      this.popup.remove();\n    }\n    if (this.mapsService.map && this.mapsService.getMarkerContainer()) {\n      popup.addTo(this.scene);\n      this.popup = popup;\n    } else {\n      this.unAddPopup = popup;\n    }\n  }\n  public initPopup() {\n    if (this.unAddPopup) {\n      this.addPopup(this.unAddPopup);\n      this.unAddPopup = null;\n    }\n  }\n\n  public init(scene: Container) {\n    this.scene = scene;\n    this.mapsService = scene.get<IMapService>(TYPES.IMapService);\n  }\n}\n"],"file":"PopupService.js"}