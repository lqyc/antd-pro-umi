"use strict";
/**
 * preset plugins for umi3
 */
Object.defineProperty(exports, "__esModule", { value: true });
const webpack_1 = require("../webpack");
function inspectorPlugin(api) {
    const inspectorConfig = api.userConfig.inspectorConfig;
    api.describe({
        key: 'inspectorConfig',
        config: {
            schema(joi) {
                return joi.object();
            },
        },
        enableBy: api.EnableBy.register,
    });
    /**
     * Inspector component open file into IDE via `__open-stack-frame-in-editor` api,
     * which is created by `errorOverlayMiddleware` and
     * defined in 'react-dev-utils/launchEditorEndpoint'
     *
     * due to umi3 not use webpack devServer,
     * so need add launch editor middleware manually
     */
    api.addBeforeMiddewares(webpack_1.createLaunchEditorMiddleware);
    api.chainWebpack((chain) => webpack_1.inspectorChainWebpack(chain, inspectorConfig));
}
exports.default = inspectorPlugin;
