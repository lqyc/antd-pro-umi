import _extends from "@babel/runtime/helpers/extends";
import _objectWithoutProperties from "@babel/runtime/helpers/objectWithoutProperties";
import _classCallCheck from "@babel/runtime/helpers/classCallCheck";
import _createClass from "@babel/runtime/helpers/createClass";
import _possibleConstructorReturn from "@babel/runtime/helpers/possibleConstructorReturn";
import _getPrototypeOf from "@babel/runtime/helpers/getPrototypeOf";
import _inherits from "@babel/runtime/helpers/inherits";
import React from 'react';
import PropsAPIContext from "./";
export default function (WrappedComponent) {
  var InjectPropsAPI =
  /*#__PURE__*/
  function (_React$Component) {
    _inherits(InjectPropsAPI, _React$Component);

    function InjectPropsAPI() {
      _classCallCheck(this, InjectPropsAPI);

      return _possibleConstructorReturn(this, _getPrototypeOf(InjectPropsAPI).apply(this, arguments));
    }

    _createClass(InjectPropsAPI, [{
      key: "render",
      value: function render() {
        var _this$props = this.props,
            forwardRef = _this$props.forwardRef,
            rest = _objectWithoutProperties(_this$props, ["forwardRef"]);

        return React.createElement(PropsAPIContext.Consumer, null, function (propsAPI) {
          return React.createElement(WrappedComponent, _extends({
            ref: forwardRef
          }, rest, {
            propsAPI: propsAPI
          }));
        });
      }
    }]);

    return InjectPropsAPI;
  }(React.Component);

  return React.forwardRef(function (props, ref) {
    return React.createElement(InjectPropsAPI, _extends({}, props, {
      forwardRef: ref
    }));
  });
}